---
phase: 01-core-display
plan: 04
type: execute
wave: 3
depends_on: ["01-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "用戶可以從左側選單進入藍牙音訊頁面"
    - "連接藍牙耳機後，用戶可以看到裝置名稱和 MAC 位址"
    - "用戶可以看到當前 codec 資訊"
    - "無裝置連接時顯示適當提示"
  artifacts: []
  key_links: []
---

<objective>
驗證 Phase 1 核心顯示功能的完整性

Purpose: 確保所有需求都已正確實現，用戶體驗符合預期
Output: 驗證通過或發現需要修復的問題
</objective>

<execution_context>
@/Users/tonynowater/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tonynowater/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

# 依賴前置計畫的產出
# Plan 01-01: BluetoothAudioHandler (Android 端)
# Plan 01-02: BluetoothAudioCubit, Model (Flutter 端)
# Plan 01-03: BluetoothAudioPage UI 與導航整合
</context>

<tasks>

<task type="auto">
  <name>Task 1: 建置應用程式</name>
  <files></files>
  <action>
執行 Flutter 建置確保應用程式可正常編譯：

```bash
flutter build apk --debug
```

確認建置成功，無編譯錯誤。
  </action>
  <verify>
```bash
ls -la build/app/outputs/flutter-apk/app-debug.apk
```
APK 檔案存在
  </verify>
  <done>Debug APK 建置成功</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: 驗證功能完整性</name>
  <what-built>
Phase 1 核心顯示功能：
- 藍牙音訊頁面 UI
- 左側選單導航
- 裝置與 codec 資訊顯示
- 權限處理流程
- 空狀態處理
  </what-built>
  <how-to-verify>
請在 Android 裝置上測試以下情境：

**測試 1: 導航功能 (NAV-01)**
1. 開啟應用程式
2. 開啟左側選單
3. 確認「藍牙音訊」選項存在
4. 點擊進入藍牙音訊頁面
   - 預期: 頁面正常載入

**測試 2: 權限處理 (PERM-01) [Android 12+ 裝置]**
1. 若首次開啟，應顯示權限請求
2. 點擊「請求權限」
3. 授予藍牙權限
   - 預期: 頁面重新載入並顯示內容

**測試 3: 無裝置連接 (PERM-02)**
1. 確保沒有連接任何藍牙音訊裝置
2. 進入藍牙音訊頁面
   - 預期: 顯示「無藍牙音訊裝置」提示和重試按鈕

**測試 4: 裝置與 Codec 資訊顯示 (DEVICE-01~03, CODEC-01~05)**
1. 連接一個藍牙耳機/喇叭
2. 進入藍牙音訊頁面
   - 預期: 顯示裝置資訊區塊
     - 裝置名稱 (DEVICE-01)
     - MAC 位址 (DEVICE-02)
     - 電量（如支援） (DEVICE-04)
   - 預期: 顯示 Codec 資訊區塊
     - Codec 類型 (CODEC-01)
     - 取樣率 (CODEC-02)
     - 位元深度 (CODEC-03)
     - 聲道模式 (CODEC-05)

**測試 5: 下拉刷新**
1. 在顯示資訊的狀態下，向下拉動
   - 預期: 觸發重新載入，資訊更新

**測試 6: 不支援提示 (PERM-03) [如有 Android 8.0 以下裝置]**
1. 在 Android 8.0 以下裝置開啟應用
   - 預期: 顯示「不支援」提示訊息
  </how-to-verify>
  <resume-signal>
完成測試後，請回報：
- "approved" - 所有測試通過
- 或描述發現的問題，格式：
  "issue: [測試編號] [問題描述]"
  </resume-signal>
</task>

</tasks>

<verification>
- APK 建置成功
- 所有手動測試情境通過
</verification>

<success_criteria>
- 用戶可從左側選單進入藍牙音訊頁面
- 已連接裝置時正確顯示裝置名稱、MAC 位址
- 已連接裝置時正確顯示 codec 類型、取樣率、位元深度、聲道模式
- 無裝置連接時顯示清楚的空狀態提示
- Android 12+ 權限請求流程正常運作
- Android 8.0 以下顯示不支援訊息
</success_criteria>

<output>
完成後建立 `.planning/phases/01-core-display/01-04-SUMMARY.md`
</output>
